## DR Keyboard Tracker Editor – 左側欄位說明（繁體中文）

這個編輯器用來為 OBS 外掛（DR_KeyboardTracker）設計鍵盤配置。左側欄位包含大多數設定。以下為左側各群組與控制項的用途說明。

### 開始
- **匯入.json**：載入之前匯出的專案。會還原畫布尺寸/主題與所有按鍵。
- **補齊.json圖片**：選擇存放按鍵圖片的資料夾，編輯器會根據檔名（如 `left_shift.png`）對應圖片。匯入後若圖片遺失，請使用此功能補齊。
- **匯入大量圖片**：一次選擇多張精靈圖。編輯器會依檔名建立/更新按鍵；若檔名符合建議對照，會自動設定按鍵 ID 與綁定。
- **下載檔名對照表**：下載 `key_filename_mapping.txt`，列出約 104 鍵的建議命名（含 left_/right_ 前綴與標點提示，例如 `grave(~)`）。
  - 也包含滑鼠按鍵與滾輪項目，方便大量匯入時依檔名自動綁定。
- **按鍵大小 / 按鍵間隔 / 套用（一般鍵盤）**：
  - 依輸入的大小與間隔，將已匯入圖片的按鍵排列到一般鍵盤位置。
  - 不會縮放或變形按鍵，只設定座標（Space/Backspace/Numpad 等維持原尺寸）。
  - 預設按鍵間隔為 0。

### 畫布設定
- **寬 (px) / 高 (px) + 套用畫布尺寸**：設定畫布尺寸（例如 1920×1080）。
- **主題**：在明亮/黑暗之間切換。
- **在畫布上顯示按鍵 ID**：切換編輯時是否在每個按鍵上顯示 ID。

### 按鍵
- **新增按鍵 (64x64)**：插入空白按鍵，之後可拖曳移動與設定。

### 屬性
- 單選按鍵時：
  - **ID**：編輯器與物件列表使用的內部代號。
  - **綁定按鍵**：按「開始綁定」後，按一次實體鍵。編輯器會優先使用左右有別的修飾鍵（如 Left Shift）。若偵測到僅有通用修飾鍵（Shift/Ctrl/Alt）會跳出警告，因 OBS 可能無法識別；VK 值會自動推得；部分鍵會在輸出時帶有 `extended: true`（方向鍵、Insert/Delete/Home/End/PageUp/PageDown、數字鍵盤 Enter 與 Divide、右 Ctrl/Alt）。
  - **圖片路徑**：每顆按鍵使用單一精靈圖：上半為未按、下半為按下。按鍵尺寸取自圖片寬度與一半高度（若為奇數高度會忽略中間 1px）。可點按按鈕選檔，若有效會在下方顯示檔名。
  - **位置 X / 位置 Y**：畫布上的絕對位置。選取時會顯示對齊導線。
  - **刪除此按鍵**：刪除目前按鍵。
- 多選按鍵時：
  - 屬性面板僅顯示群組相關欄位。
  - **位置 X / 位置 Y**：輸入群組外框左上角，以此一次移動全部按鍵。
  - **對齊至 X / 對齊至 Y**：將所有選取按鍵對齊至群組左上角的 X 或 Y。
  - **水平間距 / 垂直間距 + 套用**：由最小 X（水平）或最小 Y（垂直）開始以固定間距排列。
  - **刪除這些按鍵**：一次刪除所有選取按鍵。

### 匯出
- 左側底部 **匯出.json** 會以 `KeboardTracker.json` 進行下載。
- JSON 內每個按鍵包含 `id`、`keyBinding`、`vk`、（必要時）`extended`、`sprite`（僅檔名）、`x/y/w/h` 與 `rotation`。

### 備註
- 滑鼠中鍵拖曳為平移、滑輪縮放、拖曳按鍵以移動；選取時方向鍵可 1px 微調。
- 復原（Ctrl+Z）最多 100 步。拖曳在放開時紀錄一步；手動輸入 X/Y 停止 1 秒後紀錄一步。

### 滑鼠按鍵與滾輪支援
- 可綁定：左鍵、右鍵、中鍵、側鍵 X1（上一頁）、側鍵 X2（下一頁）、滾輪上/下。
- 按下「開始綁定」後，點一下滑鼠鍵或捲動一次滾輪，即會填入綁定並自動結束綁定。
- 綁定期間會攔截中鍵平移與滾輪縮放，以免干擾操作。

JSON 匯出使用以下對應數值（vk）：
- mouseleft：0x01（VK_LBUTTON）
- mouseright：0x02（VK_RBUTTON）
- mousemiddle：0x04（VK_MBUTTON）
- mousex1：0x05（VK_XBUTTON1）
- mousex2：0x06（VK_XBUTTON2）
- wheelup：0x0A01（自定代碼）
- wheeldown：0x0A02（自定代碼）

備註：滑鼠與滾輪不使用 `extended` 旗標，JSON 會省略該欄位。



